#!/bin/sh
#
# sfind_heart
#
# Files files with "code-like" names at or below $1, emits the names
# with a \0 character as field separator.
#
# Most often called from sfind or sinfind.
#

SCAN_ROOT="$1"
shift

if [ -z "$SCAN_ROOT" ]
then
    echo "no scan root"
    exit 1
fi
if [ ! -e "$SCAN_ROOT" ]
then
    echo "sfind_heart: $SCAN_ROOT: No such file or directory"
    exit 1
fi

find "$SCAN_ROOT" -type d \( -name .git -o -name .svn -o -name coverage -o -name bower_components -o -name node_modules -o -path ./tmp/ember-rails -o -path ./var/db -o -path './client/*/tmp' -o -path ./vendor/bundle \) -prune -o -type f \( -name '*.min.js' \) -prune -o -type f \( -name 'Makefile*' -o -name 'Rakefile*' -o -name 'Procfile*' -o -name 'Jenkinsfile*' -o -name 'Dockerfile*' -o -name 'README*' -o -name '*.procfile' -o -name '*.dockerfile' -o -name 'Gemfile*' -o -name 'Appraisals' -o -name '*.gemfile.*' -o -name '*.gemspec' -o -name '*.conf' -o -name '*.config' -o -name '*.rb' -o -name '*.ru' -o -name '*.yml' -o -name '*.yaml' -o -name '*.htm' -o -name '*.html' -o -name '*.css' -o -name '*.scss' -o -name '*.js' -o -name '*.ember-cli' -o -name '*.m' -o -name '*.swift' -o -name '*.c' -o -name '*.h' -o -name '*.cpp' -o -name '*.hpp' -o -name '*.c++' -o -name '*.php' -o -name '*.py' -o -name '*.el' -o -name '*.rb' -o -name '*.md' -o -name '*.txt' -o -name '*.java' -o -name '*.xml' -o -name '*.xsl' -o -name '*.xhtml' -o -name '*.xlsx' -o -name '*.json' -o -name '*.rake' -o -name '*.mk' -o -name '*.ini' -o -name '*.properties' -o -name '*.props' -o -name '*.sh' -o -name '*.bash' -o -name '*.bats' -o -name '*.zsh' -o -name '*.csh' -o -name '*.tcsh' -o -name '*.ksh' -o -name '*.sql' -o -name '*.erb' -o -name '*.haml' -o -name '*.tcl' -o -name '*.sup' -o -name '*.handlebars' -o -name '*.lock' -o -name '*.t' -o -name '*.pm' -o -name '*.t' -o -name '*.go' -o -name '*.proto' -o -name '*.tf' -o -name '*.tfvars' -o -name 'go.sum' -o -name 'go.mod' \) -print0
